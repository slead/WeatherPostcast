# Requirements Document

## Introduction

The Weather Dashboard is a React-based web application that displays weather predictions collected by the BOM Weather Tracker. The application provides an interactive interface for users to browse forecasts across Australian cities using an interactive map, view the "reverse forecast" (showing how predictions for a specific date evolved over time), and compare forecast accuracy. The dashboard consumes the JSON forecast files and cities.geojson generated by the collection system and presents them in a user-friendly format.

## Glossary

- **Weather Dashboard**: The React web application that displays weather forecast data
- **Reverse Forecast**: A view showing all predictions made for a specific date, organized by days-ahead (e.g., what was predicted 7 days ago vs 1 day ago vs today)
- **Days Ahead**: The number of days between when a prediction was made and the forecast date (0 = same day, 7 = week ahead)
- **Forecast Date**: The date for which weather is being predicted
- **Location Data**: JSON file containing all forecast records for a single city
- **Prediction Entry**: A single forecast containing icon_code, temp_min, temp_max, precipitation_prob, and precis
- **State**: Australian state/territory abbreviation (NSW, VIC, QLD, SA, WA, TAS, NT, ACT)
- **Cities GeoJSON**: A GeoJSON FeatureCollection containing Point features for each city with coordinates and properties (city_name, state, product_id)
- **Mini-map**: A smaller map component displayed on city pages for navigation between cities

## Requirements

### Requirement 1

**User Story:** As a user, I want to browse weather forecasts by location using an interactive map, so that I can visually find and select cities I'm interested in.

#### Acceptance Criteria

1. WHEN the Weather Dashboard loads THEN the Weather Dashboard SHALL display an interactive map of Australia showing all city locations from the cities.geojson file
2. WHEN displaying the landing page map THEN the Weather Dashboard SHALL render city markers at their geographic coordinates (longitude, latitude)
3. WHEN a user clicks on a city marker THEN the Weather Dashboard SHALL navigate to that city's forecast page
4. WHEN hovering over a city marker THEN the Weather Dashboard SHALL display the city name and state as a tooltip

### Requirement 2

**User Story:** As a user, I want each city page to include a mini-map for navigation, so that I can easily jump to other cities while viewing forecasts.

#### Acceptance Criteria

1. WHEN a city page loads THEN the Weather Dashboard SHALL display a mini-map showing all city locations
2. WHEN displaying the mini-map THEN the Weather Dashboard SHALL center the map on the currently selected city's coordinates
3. WHEN a user clicks on a different city marker in the mini-map THEN the Weather Dashboard SHALL navigate to that city's forecast page
4. WHEN displaying the mini-map THEN the Weather Dashboard SHALL visually distinguish the current city marker from other city markers

### Requirement 3

**User Story:** As a user, I want to view the weather forecasts for a selected city, so that I can evaluate how accurate the previous 7 days' worth of forecasts actually was.

#### Acceptance Criteria

1. WHEN a city is selected THEN the Weather Dashboard SHALL display forecasts for all available dates within the retention window
2. WHEN displaying a forecast THEN the Weather Dashboard SHALL show the weather icon, temperature range (min/max), precipitation probability, and precis text
3. WHEN a forecast has null values for optional fields THEN the Weather Dashboard SHALL display appropriate placeholder text or omit the field gracefully
4. WHEN displaying temperatures THEN the Weather Dashboard SHALL show values in Celsius with the degree symbol (Â°C)

### Requirement 4

**User Story:** As a data analyst, I want to view the reverse forecast for a specific date, so that I can see how predictions evolved as the date approached.

#### Acceptance Criteria

1. WHEN a user selects a forecast date THEN the Weather Dashboard SHALL display all prediction entries for that date organized by days-ahead
2. WHEN displaying the reverse forecast THEN the Weather Dashboard SHALL show predictions from highest days-ahead (oldest prediction) to lowest (most recent)
3. WHEN displaying each prediction entry THEN the Weather Dashboard SHALL indicate how many days in advance the prediction was made
4. WHEN a days-ahead slot has no prediction THEN the Weather Dashboard SHALL indicate the missing data with a placeholder

### Requirement 5

**User Story:** As a user, I want the dashboard to load forecast data efficiently, so that I can browse locations without long wait times.

#### Acceptance Criteria

1. WHEN the Weather Dashboard initializes THEN the Weather Dashboard SHALL load the cities.geojson file to populate the map
2. WHEN a user selects a city THEN the Weather Dashboard SHALL fetch only that city's forecast data on demand
3. WHEN forecast data is being loaded THEN the Weather Dashboard SHALL display a loading indicator
4. WHEN forecast data fails to load THEN the Weather Dashboard SHALL display an error message and allow retry

### Requirement 6

**User Story:** As a user, I want to see weather icons that represent forecast conditions, so that I can quickly understand the weather at a glance.

#### Acceptance Criteria

1. WHEN displaying a forecast THEN the Weather Dashboard SHALL render a weather icon corresponding to the BOM icon_code
2. WHEN an icon_code is not recognized THEN the Weather Dashboard SHALL display a default/unknown weather icon
3. WHEN rendering icons THEN the Weather Dashboard SHALL use consistent sizing across all forecast displays

### Requirement 7

**User Story:** As a user, I want the dashboard to be responsive, so that I can view forecasts on both desktop and mobile devices.

#### Acceptance Criteria

1. WHEN viewed on a desktop screen THEN the Weather Dashboard SHALL display forecasts in a multi-column layout
2. WHEN viewed on a mobile screen THEN the Weather Dashboard SHALL adapt to a single-column layout
3. WHEN the viewport size changes THEN the Weather Dashboard SHALL reflow content without requiring page reload
4. WHEN viewed on mobile THEN the Weather Dashboard SHALL display a touch-friendly map with pinch-to-zoom support

### Requirement 8

**User Story:** As a developer, I want the forecast data to be parsed correctly from JSON, so that the dashboard displays accurate information.

#### Acceptance Criteria

1. WHEN the Weather Dashboard parses location JSON THEN the Weather Dashboard SHALL extract product_id, city_name, state, timezone, and forecasts fields
2. WHEN the Weather Dashboard parses forecast records THEN the Weather Dashboard SHALL correctly interpret integer keys as days-ahead values
3. WHEN the Weather Dashboard parses prediction entries THEN the Weather Dashboard SHALL handle null values for optional fields without errors
4. WHEN the Weather Dashboard parses JSON data THEN the Weather Dashboard SHALL validate the structure matches the expected schema
5. WHEN the Weather Dashboard serializes forecast data for display THEN the Weather Dashboard SHALL format dates in a human-readable format
